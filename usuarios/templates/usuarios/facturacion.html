{% extends 'usuarios/base_usuario3.html' %}
{% load static %}
{% block styles %}
{% endblock %}
{%block title %} <title>Modulo - CC</title> {%endblock%}
{% load humanize %}
{% block content %}
{% include 'usuarios/alerts.html' %}
      <div class="page-wrapper">
        <div class="container-fluid">
          <!-- Page title -->
          <div class="page-header d-print-none">
            <div class="row align-items-center">
              <div class="col">
                <!-- Page pre-title -->
                <div class="page-pretitle">
                  Modulo
                </div>
                <h2 class="page-title">
                  Cuentas de cobro
                </h2>
              </div>
                <div class="col-auto">
                    <form method="post" role="form" enctype="multipart/form-data" onsubmit="return valida(this)">
                        {% csrf_token %}
                            <button type="submit" class="btn btn-primary ml-auto float-right" style="margin-right: 0.5rem;">Generar cobro</button>
                    </form>
                </div>
             <div class="col-auto ms-auto d-print-none">
                <div class="btn-list">
                    <a href="{% url 'usuarios:cobrorecargo' %}" class="btn btn-primary w-100">Generar recargos
                    </a>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
<div class="page-body">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-7">
                <div class="card shadow text-center">
                    <div class="card-header">
                        <b class="text-success">Estados de cuenta</b>
                    </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-3">
                                    <b class="text-primary">Operativos</b><br>
                                    {{operativos}}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Mantenimiento</b><br>
                                    {{mantenimiento}}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Suspendidos</b><br>
                                    {{suspendidos}}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Retirados</b><br>
                                    {{retirados}}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-12 text-success"><b>Valores por estado</b></div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <b class="text-primary">Operativos</b><br>
                                        ${{contoperativos|intcomma}}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Mantenimiento</b><br>
                                        ${{contmantenimiento|intcomma}}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Suspendidos</b><br>
                                        ${{contsuspendidos|intcomma}}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Retirados</b><br>
                                        ${{contretirados|intcomma}}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-12 text-success"><b>Totales</b></div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <b class="text-primary">Estados cuenta</b><br>
                                        {{ totalcuentascobro }}
                                </div>
                                <div class="col-sm-6">
                                    <b class="text-primary">Valor total</b><br>
                                        ${{totalvalores|intcomma}}
                                </div>
                            </div>
                        </div>
                </div>
            </div>
            <div class="col-lg-5 col-xl-5">
                <div class="card">
                  <div class="card-body">
                    <h3 class="card-title">Comparaci√≥n grafica</h3>
                    <div id="chart-demo-pie"></div>
                  </div>
                </div>
              </div>
        </div>
    </div>
</div>

{% endblock %}
{% block scripts %}
<script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
        window.ApexCharts && (new ApexCharts(document.getElementById('chart-demo-pie'), {
            chart: {
                type: "donut",
                fontFamily: 'inherit',
                height: 270,
                sparkline: {
                    enabled: true
                },
                animations: {
                    enabled: false
                },
            },
            fill: {
                opacity: 1,
            },
            series: [{{operativos}}, {{suspendidos}}, {{mantenimiento}}, {{retirados}}],
            labels: ["Operativos", "Suspendidos", "Mantenimiento", "Retirados"],
            grid: {
                strokeDashArray: 4,
            },
            colors: ["#406bc5", "#78a5dc", "#d3e1f3", "#e9ccf1"],
            legend: {
                show: true,
                position: 'bottom',
                offsetY: 12,
                markers: {
                    width: 10,
                    height: 10,
                    radius: 100,
                },
                itemMargin: {
                    horizontal: 9,
                    vertical: 9
                },
            },
            tooltip: {
                fillSeriesColor: false
            },
        })).render();
      });
      // @formatter:on
    </script>
{% endblock %}