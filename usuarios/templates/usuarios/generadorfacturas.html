{% extends 'usuarios/base_usuario2.html' %}
{% load static %}
{% block styles %}
{% endblock %}
{%block title %} <title>Modulo - GMF</title> {%endblock%}
{% load humanize %}
{% block content %}
{% include 'usuarios/alerts.html' %}
<!-- Titulo -->
<div class="row">
    <div class="col-sm-6">
        <h1 class="h3 text-gray-800">Generador masivo de facturas</h1>
    </div>
     <div class="col-sm-6">
        <button class="btn btn-primary btn-sm ml-auto float-right" data-toggle="modal" data-target="#alerta">Generar facturas</button>
    </div>
</div>
<div class="row">
    <div class="col-sm-7">
        <div class="row">
            <div class="col-sm-12">
                <div class="card shadow text-center">
                    <div class="card-header">
                        <b class="text-success">Facturas gestionadas</b>
                    </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-3">
                                    <b class="text-primary">Generadas</b><br>
                                    {{ facturasemi|intcomma }}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Vencidas</b><br>
                                    {{ facturasven|intcomma }}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Anuladas</b><br>
                                    {{ facturasanu|intcomma }}
                                </div>
                                <div class="col-sm-3">
                                    <b class="text-primary">Pagadas</b><br>
                                    {{ facturaspg|intcomma }}
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-12 text-success"><b>Totales</b></div>
                            </div>
                            <div class="row">
                                 <div class="col-sm-6">
                                    <b class="text-primary">Emitidas</b><br>
                                        {{ totalemitidas }}
                                </div>
                                <div class="col-sm-6">
                                    <b class="text-primary">Valor facturas emitidas</b><br>
                                        ${{ suma|intcomma }}
                                </div>
                            </div>
                        </div>
                </div>
                <br>
            </div>
        </div>
         <div class="row text-center">
            <div class="col-sm-12"> 
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Opciones adicionales</h6>
                    </div>
                    <div class="card-body">
                        <a href="{% url 'usuarios:facturamasiva' %}" class="btn btn-primary btn-icon-split">
                            <span class="icon text-white-50">
                                <i class="fas fa-download"></i>
                            </span>
                            <span class="text">Descargar facturas</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>       
    </div>
    <div class="col-sm-5 text-center">

        <div class="row">
            <div class="col-sm-12 text-center">
                <div class="card shadow mb-2">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Instrucciones</h6>
                    </div>
                    <div class="card-body">
                        Este módulo es el encargado de generar las facturas una vez se haya realizado el cobro en el modulo "CUENTAS DE COBRO"; para su correcto funcionamiento de este modulo, debe dar clic en el boton "Generar facturas" y una vez aparezca la alerta debe dar clic en el boton "Generar" para confirmar la acción y espere hasta que aparezca la alerta confirmando exitosamente la generacion de las facturas.
                    </div>
                </div>
            </div>            
        </div>
       
    </div>
</div>
<div class="modal fade" id="alerta" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Alerta</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Esta seguro que desea generar la facturación de forma masiva?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
       <form method="post" role="form" enctype="multipart/form-data" onsubmit="return valida(this)">
            {% csrf_token %}
            <button style="width: 100%" type="submit" class="btn btn-primary">Generar</button>
        </form>
      </div>
    </div>
  </div>
</div>


{% endblock %}
{% block scripts %}

{% endblock %}