{% extends 'usuarios/base_usuario3.html' %}
{% load static %}
{% block styles %}
{% endblock %}
{%block title %} <title>Estados de cuenta</title> {%endblock%}
{% block content %}
{% load humanize %}
{% include 'usuarios/alerts.html' %}
<div class="page-body">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-10">
        <div class="row">
          <h3 class="subheader">Informacion financiera</h3>
              <div class="col-md-3" style="margin-top: 0.5rem">
                <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-indigo-lt avatar">
                          <!-- Download SVG icon from http://tabler-icons.io/i/separator -->
  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="3" y1="12" x2="3" y2="12.01" /><line x1="7" y1="12" x2="17" y2="12" /><line x1="21" y1="12" x2="21" y2="12.01" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          ${{vapo|intcomma}}
                        </div>
                        <div class="text-muted">
                          Cuentas por cobrar
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3" style="margin-top: 0.5rem">
                <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-indigo-lt avatar">
                           <!-- Download SVG icon from http://tabler-icons.io/i/settings -->
  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><circle cx="12" cy="12" r="3" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          ${{contmantenimiento|intcomma}}
                        </div>
                        <div class="text-muted">
                          Mantenimiento
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3" style="margin-top: 0.5rem">
                <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-orange-lt avatar">
                           <!-- Download SVG icon from http://tabler-icons.io/i/scissors -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="6" cy="7" r="3" /><circle cx="6" cy="17" r="3" /><line x1="8.6" y1="8.6" x2="19" y2="19" /><line x1="8.6" y1="15.4" x2="19" y2="5" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          ${{contsuspendidos|intcomma}}
                        </div>
                        <div class="text-muted">
                          Suspendidos
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
             <div class="col-md-3" style="margin-top: 0.5rem">
                <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-orange-lt avatar">
  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="3" y1="3" x2="21" y2="21" /><path d="M17.669 17.669a12 12 0 0 1 -5.669 3.331a12 12 0 0 1 -8.5 -15c.797 .036 1.589 0 2.366 -.126m3.092 -.912a12 12 0 0 0 3.042 -1.962a12 12 0 0 0 8.5 3a12 12 0 0 1 -1.117 9.379" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          ${{contretirados|intcomma}}
                        </div>
                        <div class="text-muted">
                          Retirados
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>             
        </div>
        <br>
        <div class="row">
            <div class="col-md-5">
                <h3 class="subheader">Informacion de facturacion</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card card-sm">
                          <div class="card-body">
                            <div class="row align-items-center">
                              <div class="col-auto">
                                <span class="bg-teal text-white avatar">
                                  <!-- Download SVG icon from http://tabler-icons.io/i/file-invoice -->
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><line x1="9" y1="7" x2="10" y2="7" /><line x1="9" y1="13" x2="15" y2="13" /><line x1="13" y1="17" x2="15" y2="17" /></svg>
                                </span>
                              </div>
                              <div class="col">
                                <div class="font-weight-medium">
                                  {{totalfac|intcomma}}
                                </div>
                                <div class="text-muted">
                                  Generadas
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                                        <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-indigo text-white avatar">
                          <!-- Download SVG icon from http://tabler-icons.io/i/file-report -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="17" cy="17" r="4" /><path d="M17 13v4h4" /><path d="M12 3v4a1 1 0 0 0 1 1h4" /><path d="M11.5 21h-6.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v2m0 3v4" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          {{facven|intcomma}}
                        </div>
                        <div class="text-muted">
                          Vencidas
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-6">
                                        <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-orange text-white avatar">
                          <!-- Download SVG icon from http://tabler-icons.io/i/file-info -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M11 14h1v4h1" /><path d="M12 11h.01" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          {{facanu|intcomma}}
                        </div>
                        <div class="text-muted">
                          Anuladas
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                    </div>
                    <div class="col-md-6">
                                        <div class="card card-sm">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-auto">
                        <span class="bg-cyan text-white avatar">
                         <!-- Download SVG icon from http://tabler-icons.io/i/file-check -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M9 15l2 2l4 -4" /></svg>
                        </span>
                      </div>
                      <div class="col">
                        <div class="font-weight-medium">
                          {{facpg|intcomma}}
                        </div>
                        <div class="text-muted">
                         Pagas
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-6">
                       <div class="card card-sm">
                          <div class="card-body">
                            <div class="row align-items-center">
                              <div class="col-auto">
                                <span class="bg-cyan text-white avatar">
                                 <!-- Download SVG icon from http://tabler-icons.io/i/file-check -->
                                <!-- Download SVG icon from http://tabler-icons.io/i/file -->
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /></svg>
                                </span>
                              </div>
                              <div class="col">
                                <div class="font-weight-medium">
                                 {{facemi|intcomma}}
                                </div>
                                <div class="text-muted">
                                 Vigentes
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card card-sm">
                          <div class="card-body">
                            <div class="row align-items-center">
                              <div class="col-auto">
                                <span class="bg-indigo text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/currency-dollar -->
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2" /><path d="M12 3v3m0 12v3" /></svg>
                                </span>
                              </div>
                              <div class="col">
                                <div class="font-weight-medium">
                                 ${{total|intcomma}}
                                </div>
                                <div class="text-muted">
                                 Valor
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <h3 class="subheader">Estado de cuenta</h3>
                <div id="chart-combination"></div>
            </div>
        </div>
 
        
      </div>
      <div class="col-md-2">
          <h3 class="subheader">Opciones disponibles</h3>
          <div class="row">
            <div class="col-md-12" style="margin-top: 0.5rem">

            </div>
            <div class="col-md-12" style="margin-top: 0.5rem">

            </div>
            <div class="col-md-12" style="margin-top: 0.5rem">
               <a href="{% url 'usuarios:crearconceptos' %}" class="btn btn-sm btn-indigo btn-pill w-100">Facturar conceptos</a>
            </div>
            <div class="col-md-12" style="margin-top: 0.5rem">
               <a href="{% url 'usuarios:generadorfacturas' %}" class="btn btn-sm btn-indigo btn-pill w-100">Generar facturacion</a>
            </div>
            <div class="col-md-12" style="margin-top: 0.5rem">
               <a href="{% url 'usuarios:facturamasiva' %}" class="btn btn-sm btn-green btn-pill w-100">Descargar facturas</a>
            </div>          
          </div>
            <div class="col-md-12">
            <br>
              <h3 class="subheader">Comparacion grafica</h3>
              <div id="chart-demo-pie"></div>
          </div>
      </div>

    </div>
    <br>






  </div>
</div>

      </div>
    </div>

{% endblock %}
{% block scripts %}
  <script>
    function verificarTexto() {
      var input = document.getElementById("miInput");
      var boton = document.getElementById("miBoton");
      
      if (input.value === "") {
        boton.disabled = true;
      } else {
        boton.disabled = false;
      }
    }
  </script>
  <script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
        window.ApexCharts && (new ApexCharts(document.getElementById('chart-demo-pie'), {
          chart: {
            type: "donut",
            fontFamily: 'inherit',
            height: 270,
            sparkline: {
              enabled: true
            },
            animations: {
              enabled: false
            },
          },
          fill: {
            opacity: 1,
          },
          series: [{{operativos}}, {{suspendidos}}, {{mantenimiento}}, {{retirados}}],
          labels: ["Operativos", "Sus/dos", "Man/to", "Retirados"],
          grid: {
            strokeDashArray: 6,
          },
          colors: ["#7DD054", "#e9ccf1","#B8F5A4","#739668"],
          legend: {
            show: true,
            position: 'bottom',
            offsetY: 12,
            markers: {
              width: 10,
              height: 10,
              radius: 100,
            },
            itemMargin: {
              horizontal: 9,
              vertical: 9
            },
          },
          tooltip: {
            fillSeriesColor: false
          },
        })).render();
      });
      // @formatter:on
    </script>
    <script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
        window.ApexCharts && (new ApexCharts(document.getElementById('chart-combination'), {
            chart: {
                type: "bar",
                fontFamily: 'inherit',
                height: 240,
                parentHeightOffset: 0,
                toolbar: {
                    show: false,
                },
                animations: {
                    enabled: false
                },
            },
            plotOptions: {
                bar: {
                    columnWidth: '50%',
                }
            },
            dataLabels: {
                enabled: false,
            },
            fill: {
                opacity: 1,
            },
            series: [{
                name: "Operativos",
                data: [ {{vapo}}]
            },{
                name: "Suspendidos",
                data: [{{vasu}}]
            },{
                name: "Mantenimiento",
                data: [{{vama}}]
            },{
                name: "Retirados",
                data: [{{vare}}]
            }],
            grid: {
                padding: {
                    top: -20,
                    right: 0,
                    left: -4,
                    bottom: -4
                },
                strokeDashArray: 4,
            },
            xaxis: {
                labels: {
                    padding: 0,
                },
                tooltip: {
                    enabled: false
                },
                axisBorder: {
                    show: false,
                },
                categories: ['Estados de cuenta'],
            },
            yaxis: {
                labels: {
                    padding: 4
                },
            },
            colors: ["#59BA68", "#B782DC", "#59BAAA", "#206bc4"],
            legend: {
                show: false,
            },
        })).render();
      });
      // @formatter:on
    </script>
{% endblock %}