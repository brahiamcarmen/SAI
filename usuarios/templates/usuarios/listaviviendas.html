{% extends 'usuarios/base_usuario3.html' %}
{% load static %}
{% block styles %}
<style>
  /* Estilos para ocultar elementos */
  .hidden {
    display: none;
  }
</style>
{% endblock %}
{%block title %} <title>Predios</title> {%endblock%}
{% block content %}
{% include 'usuarios/alerts.html' %}
<!-- Titulo -->
      <div class="page-wrapper">
        <div class="container-fluid">
          <div class="row">
                      <div class="page-header d-print-none">
            <div class="row align-items-center">
              <div class="col">
                <!-- Page pre-title -->
                <div class="page-pretitle">
                  Modulo
                </div>
                <h2 class="page-title">
                  Predios registrados
                </h2>
              </div>
              <div class="col-auto ms-auto d-print-none">
                <div class="btn-list">
                    <span class="d-none d-sm-inline">
                        <form class="table-search-form row gx-1 align-items-center">
                            <div class="col-auto">
                                <input type="text" id="search-input" name="searchorders" class="form-control search-orders" placeholder="Buscar">
                            </div>
                        </form>
                    </span>
                </div>
              </div>
            </div>
          </div>
          </div>
          <div class="row">
            {% for viviendas in viviendas %}
              <div class="col-md-6 col-xl-3 item" style="margin-top: 0.5rem">
                <a class="card card-link" href="{% url 'usuarios:vervivienda' viviendas.IdVivienda %}" title="{{ cierre.Fecha }}">
                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <div class="font-weight-medium item">{{ viviendas.IdVivienda }}</div>
                        <div class="text-muted item">{{ viviendas.Direccion}}&nbsp;CS&nbsp;{{viviendas.NumeroCasa}}</div>
                        <div class="text-muted">{{ viviendas.IdPropietario }}</div>
                        <div class="small mt-1">
                          {% if viviendas.EstadoServicio == 'Operativo' %}
                            <span class="badge bg-success-lt">{{ viviendas.EstadoServicio }}</span>
                            {% elif viviendas.EstadoServicio == 'Suspendido' %}
                            <span class="badge bg-warning-lt">{{ viviendas.EstadoServicio }}</span>
                            {% elif viviendas.EstadoServicio == 'Mantenimiento' %}
                            <span class="badge bg-info-lt">{{ viviendas.EstadoServicio }}</span>

                            {%else%}
                            <span class="badge bg-danger-lt">Retirado</span>
                            {%endif%}
                        </div>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            {% endfor %}
          </div>
          <!-- Page title -->
        </div>
      </div>
<br>       
{% endblock %}
{% block scripts %}
<script>
  // Función para realizar la búsqueda
  function search() {
    var searchTerm = document.getElementById("search-input").value.toLowerCase();
    var items = document.getElementsByClassName("item");

    // Iterar sobre todos los elementos dentro del div #content
    for (var i = 0; i < items.length; i++) {
      var itemText = items[i].innerText.toLowerCase();
      
      // Comprobar si el texto del elemento coincide con el término de búsqueda
      if (itemText.includes(searchTerm)) {
        // Mostrar el elemento si coincide
        items[i].classList.remove("hidden");
      } else {
        // Ocultar el elemento si no coincide
        items[i].classList.add("hidden");
      }
    }
  }

  // También podemos agregar un evento de búsqueda en tiempo real mientras el usuario escribe
  document.getElementById("search-input").addEventListener("input", search);
</script>

{% endblock %}